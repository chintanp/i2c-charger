#!/usr/bin/env node
/*
 * Copyright (c) 2011-2014 YY Digital Pty Ltd. All Rights Reserved.
 * Please see the LICENSE file included with this distribution for details.
 */

var logger = require("../lib/logger");
var args = process.argv.splice(2);

if (args.length === 0) {
  logger.error("USAGE: gdrive-upload [files...] <destination_folder_id>");
  return;
}

var last = args[args.length -1];
var destination_folder;

if (last.match(/^[A-Za-z0-9]{28}$/)) {
  destination_folder=last;
  logger.debug("Destination Folder ID: " + destination_folder);
  args.splice(-1);
}

var lib = require("../lib/gdrive-upload");
lib.init(function() {
  lib.upload({
    files: args,
    destination_folder: destination_folder
  });
});

